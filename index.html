<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>yousampler</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <script>
        if (window.location.protocol === 'file:') {
            alert("⚠️ YouTube API Error Warning ⚠️\n\nRunning this app directly from a file (file://) causes YouTube Error 153.\n\nPlease run this app using a local server.\n\nWe can start one for you!");
        }
    </script>
</head>

<body>
    <div class="app-container">
        <!-- Compact Header -->
        <header class="compact-header">
            <div class="header-left">
                <button class="btn-icon" id="btn-play-pause" title="SPACE">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" id="play-pause-icon">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </button>
                <button id="btn-midi-toggle" title="Toggle MIDI">MIDI</button>
            </div>
            <div class="header-center">
                <img src="logo.svg" alt="yousampler" class="branding-logo">
            </div>
            <div class="header-right">
                <button class="btn-icon" id="btn-fullscreen" title="Full Screen">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                        <polyline points="17 2 12 7 7 2"></polyline>
                    </svg>
                </button>
                <button class="btn-icon" id="btn-share" title="Copy URL">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" id="ios-share-icon">
                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                        <polyline points="16 6 12 2 8 6"></polyline>
                        <line x1="12" y1="2" x2="12" y2="15"></line>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Grid Section -->
        <main class="grid-section">
            <div class="pad-grid" id="pad-grid">
                <!-- Pads will be generated by JS -->
            </div>
        </main>

        <!-- Compact Footer -->
        <footer class="compact-footer">
            <!-- Row 1: Controls and Title -->
            <div class="footer-row-1">
                <div class="footer-controls">
                    <!-- Volume -->
                    <div class="header-knob" id="knob-volume" title="Volume">
                        <div class="knob-indicator" id="val-bar-vol"></div>
                    </div>
                    <!-- Pitch -->
                    <div class="header-knob" id="knob-pitch" title="Pitch">
                        <div class="knob-indicator" id="val-bar-pitch"></div>
                    </div>
                    <!-- Mode -->
                    <div class="header-knob" id="mode-control-lcd" title="Playback Mode">
                        <div class="mode-icon" id="mode-icon"></div>
                    </div>
                </div>
                <div class="footer-title">
                    <span id="video-title">Select a pad to load video</span>
                </div>
                <div class="footer-trash">
                    <div class="trash-zone" id="trash-zone" title="Drop to Delete">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                        </svg>
                    </div>
                </div>
            </div>
            <!-- Row 2: Timeline -->
            <div class="footer-row-2">
                <div class="footer-timeline">
                    <div class="timeline-container" id="timeline-container">
                        <div class="trim-overlay left" id="trim-overlay-left"></div>
                        <div class="trim-overlay right" id="trim-overlay-right"></div>
                        <div class="timeline-track"></div>
                        <div class="playhead" id="playhead"></div>
                        <div class="trim-handle start" id="trim-start">
                            <span class="trim-time" id="start-time-display">00:00</span>
                            <svg class="trim-arrow" viewBox="0 0 12 12" fill="currentColor">
                                <path d="M8 6L3 2v8z" />
                            </svg>
                        </div>
                        <div class="trim-handle end" id="trim-end">
                            <svg class="trim-arrow" viewBox="0 0 12 12" fill="currentColor">
                                <path d="M4 6l5-4v8z" />
                            </svg>
                            <span class="trim-time" id="end-time-display">00:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Video Loader Modal -->
        <div class="modal-overlay" id="loader-modal">
            <div class="modal-content">
                <button id="btn-close-modal" title="Close">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h3>LOAD VIDEO</h3>
                <input type="text" id="video-url-input" placeholder="Paste YouTube URL here...">
                <div class="modal-actions">
                    <button id="btn-cancel-load">CANCEL</button>
                    <button id="btn-confirm-load">LOAD</button>
                </div>
                <div class="modal-divider">OR SELECT A SUGGESTED VIDEO</div>
                <div class="suggested-videos-grid" id="suggested-videos-grid">
                    <!-- Suggested video pads will be generated by JS -->
                </div>
            </div>
        </div>
    </div>

    <button id="btn-exit-fullscreen" title="Exit Full Screen">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="app.js"></script>
</body>

</html>
